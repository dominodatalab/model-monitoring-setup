# Model Monitoring Example

This folder contains a complete example for training and deploying a model with monitoring.

## Files

- `train_model.ipynb` - Jupyter notebook that trains a Random Forest classifier
- `model.pkl` - Trained model (generated by notebook)
- `model_script.py` - Deployment script for Domino Model API
- `generate_drifted_data.py` - Script to generate test data with drift for monitoring validation

## Usage

1. **Train the model**: Run `train_model.ipynb` to create the model and training data
2. **Deploy as Model API**: Use `model_script.py` as your deployment script
3. **Test in Domino UI**: Use the sample input below

## Sample Input for Domino Model API Testing

```json
{
  "data": {
    "1_feature": 0.5,
    "2_feature": -0.2,
    "3_feature": 1.1,
    "4_feature": 0.0,
    "5_feature": -0.8,
    "6_feature": 0.3,
    "7_feature": 1.2,
    "8_feature": -0.1,
    "9_feature": 0.7,
    "10_feature": -0.5
  }
}
```

The model expects all 10 features and returns a predicted class (class_1 through class_4) with confidence scores and probabilities.

## Generating Drifted Data for Testing

Use `generate_drifted_data.py` to create test data with controlled drift for validating model monitoring:

```bash
# Generate low drift data (30% features affected, 0.3 std dev shift)
python generate_drifted_data.py --drift-level low --count 100

# Generate medium drift data (50% features affected, 0.8 std dev shift)
python generate_drifted_data.py --drift-level medium --count 50

# Generate high drift data (80% features affected, 1.5 std dev shift)
python generate_drifted_data.py --drift-level high --count 200

# Generate with custom output filename 
python generate_drifted_data.py --drift-level medium --output my_drift_test.csv
```

**Drift Types**:
- `mean_shift` (default): Shifts feature means
- `variance_change`: Changes feature variance without shifting mean
- `mixed`: Combines mean shift and variance change

```bash
# Generate variance drift
python generate_drifted_data.py --drift-level medium --drift-type variance_change --count 75

# Generate mixed drift
python generate_drifted_data.py --drift-level high --drift-type mixed --count 100
```

Generated files are saved to `/mnt/artifacts/` and can be used to test drift detection in Model Monitor.